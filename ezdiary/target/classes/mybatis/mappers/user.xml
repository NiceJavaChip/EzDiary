<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.user">
			<resultMap type="adminAskDTO" id="ask">
				<result property="ask_idx" column="ask_idx"/>
				<result property="ask_cntnt" column="ask_cntnt"/>
				<result property="status" column="status"/>
				<result property="writer" column="writer"/>
				<result property="write_date" column="write_date"/>
				<result property="editor" column="editor"/>
				<result property="edit_date" column="edit_date"/>
			</resultMap>
			<resultMap type="adminAnswerDTO" id="answer">
				<result property="answer_idx" column="answer_idx"/>
				<result property="ask_idx" column="ask_idx"/>
				<result property="answer_cntnt" column="answer_cntnt"/>
				<result property="status" column="status"/>
				<result property="writer" column="writer"/>
				<result property="write_date" column="write_date"/>
				<result property="editor" column="editor"/>
				<result property="edit_date" column="edit_date"/>
			</resultMap>
<!--         <resultMap type="userDTO" id="userMember">
           <result property="user_idx" column="user_idx"/>
           <result property="user_nick" column="user_nick"/>
           <result property="status" column="status"/>
           <result property="writer" column="writer"/>
           <result property="write_date" column="write_date"/>
           <result property="editor" column="editor"/>
           <result property="edit_date" column="edit_date"/>
        </resultMap> -->
        
        <insert id="insertNick">
        	INSERT INTO 
				 EZ_DIARY_USER
					(user_idx, user_nick, status, writer, write_date, editor, edit_date)
				 VALUES
					(user_idx_s.nextval, #{user_nick}, 'c', #{user_nick}, sysdate, #{user_nick}, sysdate)
        </insert>
        
        <select id="surveyAskList" parameterType="_int" resultMap="ask">
        	<![CDATA[ 
	        	SELECT ask_cntnt from EZ_DIARY_ASK
        	]]>
        </select>
        
        <select id="surveyAnswerList" parameterType="int" resultMap="answer">
        	<![CDATA[ 
			SELECT answer_cntnt FROM EZ_DIARY_ASK eda INNER JOIN 
			EZ_DIARY_ASK_ANSWER edaa ON (eda.ASK_IDX = edaa.ASK_IDX) WHERE edaa.ASK_IDX = 1 ORDER BY edaa.ANSWER_CNTNT ASC
        	]]>	
        </select>
</mapper>